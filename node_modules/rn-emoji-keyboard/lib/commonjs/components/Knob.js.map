{"version":3,"sources":["Knob.tsx"],"names":["Knob","offsetY","height","onClose","setIsExpanded","screenHeight","expandedHeight","defaultHeight","knobStyles","React","useContext","KeyboardContext","panResponder","useRef","PanResponder","create","onStartShouldSetPanResponder","onStartShouldSetPanResponderCapture","onMoveShouldSetPanResponder","onMoveShouldSetPanResponderCapture","onPanResponderGrant","Keyboard","dismiss","onPanResponderMove","Animated","event","dy","useNativeDriver","onPanResponderRelease","_","gestureState","spring","toValue","start","setValue","onShouldBlockNativeResponder","current","panHandlers","styles","panContainer","knob","StyleSheet","paddingHorizontal","paddingTop","alignSelf","flexDirection","backgroundColor","width","marginBottom","borderRadius","shadowColor","shadowOpacity","shadowOffset","shadowRadius"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport {\n  Animated,\n  useWindowDimensions,\n  StyleSheet,\n  View,\n  PanResponder,\n  Keyboard,\n} from 'react-native'\nimport { getHeight } from '../utils'\nimport { KeyboardContext } from '../contexts/KeyboardContext'\n\ntype KnobProps = {\n  offsetY: Animated.Value\n  height: Animated.Value\n  onClose: () => void\n  setIsExpanded: (isExpanded: boolean) => void\n}\n\nexport const Knob = ({ offsetY, height, onClose, setIsExpanded }: KnobProps) => {\n  const { height: screenHeight } = useWindowDimensions()\n  const { expandedHeight, defaultHeight, knobStyles } = React.useContext(KeyboardContext)\n\n  const panResponder = React.useRef(\n    PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onStartShouldSetPanResponderCapture: () => true,\n      onMoveShouldSetPanResponder: () => true,\n      onMoveShouldSetPanResponderCapture: () => true,\n\n      onPanResponderGrant: () => Keyboard.dismiss(),\n      onPanResponderMove: Animated.event([null, { dy: offsetY }], {\n        useNativeDriver: false,\n      }),\n      onPanResponderRelease: (_, gestureState) => {\n        Animated.spring(offsetY, {\n          useNativeDriver: false,\n          toValue: 0,\n        }).start()\n        if (gestureState.dy < -50) {\n          setIsExpanded(true)\n          Animated.spring(height, {\n            useNativeDriver: false,\n            toValue: getHeight(expandedHeight, screenHeight),\n          }).start()\n        } else if (gestureState.dy > 150) {\n          setIsExpanded(false)\n          height.setValue(getHeight(defaultHeight, screenHeight))\n          offsetY.setValue(0)\n          onClose()\n        } else {\n          setIsExpanded(false)\n          Animated.spring(height, {\n            useNativeDriver: false,\n            toValue: getHeight(defaultHeight, screenHeight),\n          }).start()\n        }\n      },\n      onShouldBlockNativeResponder: () => true,\n    })\n  ).current\n\n  return (\n    <View {...panResponder.panHandlers}>\n      <View style={styles.panContainer}>\n        <Animated.View style={[styles.knob, knobStyles]} />\n      </View>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  panContainer: {\n    paddingHorizontal: 20,\n    paddingTop: 20,\n    alignSelf: 'center',\n    flexDirection: 'column-reverse',\n    backgroundColor: '#00000000',\n  },\n  knob: {\n    height: 6,\n    width: 50,\n    backgroundColor: '#fff',\n    marginBottom: 6,\n    alignSelf: 'center',\n    borderRadius: 4,\n    shadowColor: 'black',\n    shadowOpacity: 0.15,\n    shadowOffset: { width: 0, height: 0 },\n    shadowRadius: 5,\n  },\n})\n"]}