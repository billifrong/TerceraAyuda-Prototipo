{"version":3,"sources":["ModalWithBackdrop.tsx"],"names":["ModalWithBackdrop","isOpen","backdropPress","children","rest","height","screenHeight","translateY","React","useRef","Animated","Value","current","backdropColor","disableSafeArea","useContext","KeyboardContext","handleTimeout","useEffect","spring","toValue","useNativeDriver","start","handleClose","styles","modalContainer","backgroundColor","transform","StyleSheet","create","flex","justifyContent","container","borderRadius","shadowColor","shadowOpacity","shadowOffset","width","shadowRadius","elevation"],"mappings":";;;;;;;AAAA;;AACA;;AASA;;AACA;;AACA;;;;;;;;AAQO,MAAMA,iBAAiB,GAAG,CAAC;AAChCC,EAAAA,MADgC;AAEhCC,EAAAA,aAFgC;AAGhCC,EAAAA,QAHgC;AAIhC,KAAGC;AAJ6B,CAAD,KAKU;AACzC,QAAM;AAAEC,IAAAA,MAAM,EAAEC;AAAV,MAA2B,uCAAjC;AACA,QAAMC,UAAU,GAAGC,KAAK,CAACC,MAAN,CAAa,IAAIC,sBAASC,KAAb,CAAmBL,YAAnB,CAAb,EAA+CM,OAAlE;AACA,QAAM;AAAEC,IAAAA,aAAF;AAAiBC,IAAAA;AAAjB,MAAqCN,KAAK,CAACO,UAAN,CAAiBC,gCAAjB,CAA3C;AACA,QAAMC,aAAa,GAAG,6BAAtB;AAEAT,EAAAA,KAAK,CAACU,SAAN,CAAgB,MAAM;AACpBR,0BAASS,MAAT,CAAgBZ,UAAhB,EAA4B;AAC1Ba,MAAAA,OAAO,EAAEnB,MAAM,GAAG,CAAH,GAAOK,YADI;AAE1Be,MAAAA,eAAe,EAAE;AAFS,KAA5B,EAGGC,KAHH;AAID,GALD,EAKG,CAACrB,MAAD,EAASK,YAAT,EAAuBC,UAAvB,CALH;;AAOA,QAAMgB,WAAW,GAAG,MAAM;AACxBb,0BAASS,MAAT,CAAgBZ,UAAhB,EAA4B;AAC1Ba,MAAAA,OAAO,EAAEd,YADiB;AAE1Be,MAAAA,eAAe,EAAE;AAFS,KAA5B,EAGGC,KAHH;;AAIAL,IAAAA,aAAa,CAAC,MAAMf,aAAa,EAApB,EAAwB,GAAxB,CAAb;AACD,GAND;;AAQA,sBACE,oBAAC,kBAAD;AAAO,IAAA,OAAO,EAAED,MAAhB;AAAwB,IAAA,aAAa,EAAC,MAAtC;AAA6C,IAAA,WAAW,EAAE;AAA1D,KAAoEG,IAApE,gBACE,oBAAC,6BAAD;AAAkB,IAAA,KAAK,EAAEoB,MAAM,CAACC,cAAhC;AAAgD,IAAA,aAAa,EAAE,CAA/D;AAAkE,IAAA,OAAO,EAAEF;AAA3E,kBACE,oBAAC,iBAAD;AAAM,IAAA,KAAK,EAAE,CAACC,MAAM,CAACC,cAAR,EAAwB;AAAEC,MAAAA,eAAe,EAAEb;AAAnB,KAAxB;AAAb,kBACE,oBAAC,uCAAD;AAAmB,IAAA,KAAK,EAAEW,MAAM,CAACC,cAAjC;AAAiD,IAAA,UAAU,EAAE,CAACX;AAA9D,kBACE,oBAAC,6BAAD;AAAkB,IAAA,aAAa,EAAE;AAAjC,kBACE,oBAAC,qBAAD,CAAU,IAAV;AACE,IAAA,KAAK,EAAE;AACLa,MAAAA,SAAS,EAAE,CAAC;AAAEpB,QAAAA;AAAF,OAAD;AADN;AADT,KAIGJ,QAJH,CADF,CADF,CADF,CADF,CADF,CADF;AAkBD,CA5CM;;;;AA8CP,MAAMqB,MAAM,GAAGI,wBAAWC,MAAX,CAAkB;AAC/BJ,EAAAA,cAAc,EAAE;AAAEK,IAAAA,IAAI,EAAE,CAAR;AAAWC,IAAAA,cAAc,EAAE;AAA3B,GADe;AAE/BC,EAAAA,SAAS,EAAE;AACTN,IAAAA,eAAe,EAAE,MADR;AAETO,IAAAA,YAAY,EAAE,EAFL;AAGTC,IAAAA,WAAW,EAAE,OAHJ;AAITC,IAAAA,aAAa,EAAE,IAJN;AAKTC,IAAAA,YAAY,EAAE;AAAEC,MAAAA,KAAK,EAAE,CAAT;AAAYhC,MAAAA,MAAM,EAAE;AAApB,KALL;AAMTiC,IAAAA,YAAY,EAAE,CANL;AAOTC,IAAAA,SAAS,EAAE;AAPF;AAFoB,CAAlB,CAAf","sourcesContent":["import * as React from 'react'\nimport {\n  Modal,\n  Animated,\n  useWindowDimensions,\n  StyleSheet,\n  TouchableOpacity,\n  View,\n  ModalProps,\n} from 'react-native'\nimport { KeyboardContext } from '../contexts/KeyboardContext'\nimport { useTimeout } from '../hooks/useTimeout'\nimport { IsSafeAreaWrapper } from './ConditionalContainer'\n\ntype ModalWithBackdropProps = {\n  isOpen: boolean\n  backdropPress: () => void\n  children: React.ReactNode\n}\n\nexport const ModalWithBackdrop = ({\n  isOpen,\n  backdropPress,\n  children,\n  ...rest\n}: ModalWithBackdropProps & ModalProps) => {\n  const { height: screenHeight } = useWindowDimensions()\n  const translateY = React.useRef(new Animated.Value(screenHeight)).current\n  const { backdropColor, disableSafeArea } = React.useContext(KeyboardContext)\n  const handleTimeout = useTimeout()\n\n  React.useEffect(() => {\n    Animated.spring(translateY, {\n      toValue: isOpen ? 0 : screenHeight,\n      useNativeDriver: true,\n    }).start()\n  }, [isOpen, screenHeight, translateY])\n\n  const handleClose = () => {\n    Animated.spring(translateY, {\n      toValue: screenHeight,\n      useNativeDriver: true,\n    }).start()\n    handleTimeout(() => backdropPress(), 200)\n  }\n\n  return (\n    <Modal visible={isOpen} animationType=\"fade\" transparent={true} {...rest}>\n      <TouchableOpacity style={styles.modalContainer} activeOpacity={1} onPress={handleClose}>\n        <View style={[styles.modalContainer, { backgroundColor: backdropColor }]}>\n          <IsSafeAreaWrapper style={styles.modalContainer} isSafeArea={!disableSafeArea}>\n            <TouchableOpacity activeOpacity={1}>\n              <Animated.View\n                style={{\n                  transform: [{ translateY }],\n                }}>\n                {children}\n              </Animated.View>\n            </TouchableOpacity>\n          </IsSafeAreaWrapper>\n        </View>\n      </TouchableOpacity>\n    </Modal>\n  )\n}\n\nconst styles = StyleSheet.create({\n  modalContainer: { flex: 1, justifyContent: 'flex-end' },\n  container: {\n    backgroundColor: '#fff',\n    borderRadius: 16,\n    shadowColor: 'black',\n    shadowOpacity: 0.15,\n    shadowOffset: { width: 0, height: 0 },\n    shadowRadius: 5,\n    elevation: 10,\n  },\n})\n"]}