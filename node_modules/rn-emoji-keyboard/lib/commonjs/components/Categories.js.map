{"version":3,"sources":["Categories.tsx"],"names":["CATEGORY_ELEMENT_WIDTH","Categories","activeCategoryIndex","categoryContainerColor","onCategoryChangeFailed","activeCategoryContainerColor","categoryPosition","renderList","setActiveCategoryIndex","categoryContainerStyles","React","useContext","KeyboardContext","scrollNav","useRef","Animated","Value","current","handleScrollToCategory","useCallback","category","findIndex","cat","title","renderItem","item","index","useEffect","spring","toValue","useNativeDriver","start","activeIndicator","styles","backgroundColor","transform","translateX","getStylesBasedOnPosition","style","navigation","push","navigationFloating","navigationTop","navigationBottom","defaultKeyboardContext","renderData","useMemo","map","icon","find","floating","separator","activeIndicatorContainer","StyleSheet","create","position","bottom","left","right","alignItems","padding","borderColor","borderRadius","paddingVertical","borderBottomLeftRadius","borderBottomRightRadius","borderTopWidth","paddingTop","paddingBottom","borderTopLeftRadius","borderTopRightRadius","borderBottomWidth","width","height","marginHorizontal"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEA,MAAMA,sBAAsB,GAAG,EAA/B;;AAEO,MAAMC,UAAU,GAAG,MAAM;AAC9B,QAAM;AACJC,IAAAA,mBADI;AAEJC,IAAAA,sBAFI;AAGJC,IAAAA,sBAHI;AAIJC,IAAAA,4BAJI;AAKJC,IAAAA,gBALI;AAMJC,IAAAA,UANI;AAOJC,IAAAA,sBAPI;AAQJC,IAAAA;AARI,MASFC,KAAK,CAACC,UAAN,CAAiBC,gCAAjB,CATJ;AAUA,QAAMC,SAAS,GAAGH,KAAK,CAACI,MAAN,CAAa,IAAIC,sBAASC,KAAb,CAAmB,CAAnB,CAAb,EAAoCC,OAAtD;AACA,QAAMC,sBAAsB,GAAGR,KAAK,CAACS,WAAN,CAC5BC,QAAD,IAA6B;AAC3BZ,IAAAA,sBAAsB,CAACD,UAAU,CAACc,SAAX,CAAsBC,GAAD,IAASA,GAAG,CAACC,KAAJ,KAAcH,QAA5C,CAAD,CAAtB;AACD,GAH4B,EAI7B,CAACb,UAAD,EAAaC,sBAAb,CAJ6B,CAA/B;AAOA,QAAMgB,UAAU,GAAGd,KAAK,CAACS,WAAN,CACjB,CAAC;AAAEM,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GAAD,kBACE,oBAAC,0BAAD;AAAc,IAAA,IAAI,EAAED,IAApB;AAA0B,IAAA,KAAK,EAAEC,KAAjC;AAAwC,IAAA,sBAAsB,EAAER;AAAhE,IAFe,EAIjB,CAACA,sBAAD,CAJiB,CAAnB;AAMAR,EAAAA,KAAK,CAACiB,SAAN,CAAgB,MAAM;AACpBZ,0BAASa,MAAT,CAAgBf,SAAhB,EAA2B;AACzBgB,MAAAA,OAAO,EAAE3B,mBAAmB,GAAGF,sBADN;AAEzB8B,MAAAA,eAAe,EAAE;AAFQ,KAA3B,EAGGC,KAHH;AAID,GALD,EAKG,CAAC7B,mBAAD,EAAsBW,SAAtB,CALH;AAOA,QAAMmB,eAAe,GAAGtB,KAAK,CAACS,WAAN,CACtB,mBACE,oBAAC,qBAAD,CAAU,IAAV;AACE,IAAA,KAAK,EAAE,CACLc,MAAM,CAACD,eADF,EAEL;AACEE,MAAAA,eAAe,EAAE7B;AADnB,KAFK,EAKL;AACE8B,MAAAA,SAAS,EAAE,CAAC;AAAEC,QAAAA,UAAU,EAAEvB;AAAd,OAAD;AADb,KALK;AADT,IAFoB,EActB,CAACR,4BAAD,EAA+BQ,SAA/B,CAdsB,CAAxB;;AAiBA,QAAMwB,wBAAwB,GAAG,MAAM;AACrC,UAAMC,KAAkB,GAAG,CAACL,MAAM,CAACM,UAAR,EAAoB9B,uBAApB,CAA3B;;AACA,YAAQH,gBAAR;AACE,WAAK,UAAL;AACEgC,QAAAA,KAAK,CAACE,IAAN,CAAWP,MAAM,CAACQ,kBAAlB;AACA;;AACF,WAAK,KAAL;AACEH,QAAAA,KAAK,CAACE,IAAN,CAAWP,MAAM,CAACS,aAAlB;AACA;;AACF,WAAK,QAAL;AACEJ,QAAAA,KAAK,CAACE,IAAN,CAAWP,MAAM,CAACU,gBAAlB;AACA;;AACF;AACE,wCAAoBrC,gBAApB;AACA;AAZJ;;AAeA,QACEH,sBAAsB,KAAKyC,yCAAuBzC,sBAAlD,IACAG,gBAAgB,KAAK,UAFvB,EAIEgC,KAAK,CAACE,IAAN,CAAW;AACTN,MAAAA,eAAe,EAAE/B;AADR,KAAX;AAGF,WAAOmC,KAAP;AACD,GAzBD;;AA2BA,QAAMO,UAAU,GAAGnC,KAAK,CAACoC,OAAN,CAAc,MAAM;AACrC,WAAOvC,UAAU,CAACwC,GAAX,CAAgB3B,QAAD;AAAA;;AAAA,aAAe;AACnCA,QAAAA,QAAQ,EAAEA,QAAQ,CAACG,KADgB;AAEnCyB,QAAAA,IAAI,EACF,uDAAsBC,IAAtB,CAA4B3B,GAAD,IAASA,GAAG,CAACF,QAAJ,KAAiBA,QAAQ,CAACG,KAA9D,iFAAsEyB,IAAtE,KACA;AAJiC,OAAf;AAAA,KAAf,CAAP;AAMD,GAPkB,EAOhB,CAACzC,UAAD,CAPgB,CAAnB;AASA,sBACE,oBAAC,iBAAD;AAAM,IAAA,KAAK,EAAE,CAACD,gBAAgB,KAAK,UAArB,IAAmC2B,MAAM,CAACiB,QAA3C;AAAb,kBACE,oBAAC,iBAAD;AAAM,IAAA,KAAK,EAAEb,wBAAwB;AAArC,kBACE,oBAAC,qBAAD;AACE,IAAA,IAAI,EAAEQ,UADR;AAEE,IAAA,YAAY,EAAGpB,IAAD,IAAUA,IAAI,CAACL,QAF/B;AAGE,IAAA,UAAU,EAAEI,UAHd;AAIE,IAAA,sBAAsB,EAAE,mBAAM,oBAAC,iBAAD;AAAM,MAAA,KAAK,EAAES,MAAM,CAACkB;AAApB,MAJhC;AAKE,IAAA,8BAA8B,EAAE,KALlC;AAME,IAAA,UAAU,EAAE,IANd;AAOE,IAAA,qBAAqB,EAAE/C,sBAPzB;AAQE,IAAA,mBAAmB,EAAE4B,eARvB;AASE,IAAA,wBAAwB,EAAEC,MAAM,CAACmB,wBATnC;AAUE,IAAA,SAAS,EAAElD;AAVb,IADF,CADF,CADF;AAkBD,CAvGM;;;;AAyGP,MAAM+B,MAAM,GAAGoB,wBAAWC,MAAX,CAAkB;AAC/BJ,EAAAA,QAAQ,EAAE;AACRK,IAAAA,QAAQ,EAAE,UADF;AAERC,IAAAA,MAAM,EAAE,EAFA;AAGRC,IAAAA,IAAI,EAAE,EAHE;AAIRC,IAAAA,KAAK,EAAE,EAJC;AAKRC,IAAAA,UAAU,EAAE;AALJ,GADqB;AAQ/BpB,EAAAA,UAAU,EAAE;AACVqB,IAAAA,OAAO,EAAE,CADC;AAEVD,IAAAA,UAAU,EAAE,QAFF;AAGVE,IAAAA,WAAW,EAAE;AAHH,GARmB;AAa/BpB,EAAAA,kBAAkB,EAAE;AAClBqB,IAAAA,YAAY,EAAE;AADI,GAbW;AAgB/BnB,EAAAA,gBAAgB,EAAE;AAChBoB,IAAAA,eAAe,EAAE,CADD;AAEhBC,IAAAA,sBAAsB,EAAE,CAFR;AAGhBC,IAAAA,uBAAuB,EAAE,CAHT;AAIhBC,IAAAA,cAAc,EAAE;AAJA,GAhBa;AAsB/BxB,EAAAA,aAAa,EAAE;AACbyB,IAAAA,UAAU,EAAE,EADC;AAEbC,IAAAA,aAAa,EAAE,CAFF;AAGbC,IAAAA,mBAAmB,EAAE,CAHR;AAIbC,IAAAA,oBAAoB,EAAE,CAJT;AAKbC,IAAAA,iBAAiB,EAAE;AALN,GAtBgB;AA6B/BpB,EAAAA,SAAS,EAAE;AACTqB,IAAAA,KAAK,EAAE,CADE;AAETC,IAAAA,MAAM,EAAE,EAFC;AAGTvC,IAAAA,eAAe,EAAE,WAHR;AAITwC,IAAAA,gBAAgB,EAAE;AAJT,GA7BoB;AAmC/B1C,EAAAA,eAAe,EAAE;AACfuB,IAAAA,QAAQ,EAAE,UADK;AAEfiB,IAAAA,KAAK,EAAE,EAFQ;AAGfC,IAAAA,MAAM,EAAE,EAHO;AAIfX,IAAAA,YAAY,EAAE;AAJC,GAnCc;AAyC/BV,EAAAA,wBAAwB,EAAE;AACxBG,IAAAA,QAAQ,EAAE,UADc;AAExBiB,IAAAA,KAAK,EAAE,EAFiB;AAGxBC,IAAAA,MAAM,EAAE;AAHgB;AAzCK,CAAlB,CAAf","sourcesContent":["import * as React from 'react'\nimport { Animated, FlatList, StyleSheet, View, ViewStyle } from 'react-native'\nimport { defaultKeyboardContext } from '../contexts/KeyboardProvider'\nimport { KeyboardContext } from '../contexts/KeyboardContext'\nimport { CATEGORIES_NAVIGATION, CategoryNavigationItem, CategoryTypes } from '../types'\nimport { CategoryItem } from './CategoryItem'\nimport { exhaustiveTypeCheck } from '../utils'\n\nconst CATEGORY_ELEMENT_WIDTH = 37\n\nexport const Categories = () => {\n  const {\n    activeCategoryIndex,\n    categoryContainerColor,\n    onCategoryChangeFailed,\n    activeCategoryContainerColor,\n    categoryPosition,\n    renderList,\n    setActiveCategoryIndex,\n    categoryContainerStyles,\n  } = React.useContext(KeyboardContext)\n  const scrollNav = React.useRef(new Animated.Value(0)).current\n  const handleScrollToCategory = React.useCallback(\n    (category: CategoryTypes) => {\n      setActiveCategoryIndex(renderList.findIndex((cat) => cat.title === category))\n    },\n    [renderList, setActiveCategoryIndex]\n  )\n\n  const renderItem = React.useCallback(\n    ({ item, index }: { item: CategoryNavigationItem; index: number }) => (\n      <CategoryItem item={item} index={index} handleScrollToCategory={handleScrollToCategory} />\n    ),\n    [handleScrollToCategory]\n  )\n  React.useEffect(() => {\n    Animated.spring(scrollNav, {\n      toValue: activeCategoryIndex * CATEGORY_ELEMENT_WIDTH,\n      useNativeDriver: true,\n    }).start()\n  }, [activeCategoryIndex, scrollNav])\n\n  const activeIndicator = React.useCallback(\n    () => (\n      <Animated.View\n        style={[\n          styles.activeIndicator,\n          {\n            backgroundColor: activeCategoryContainerColor,\n          },\n          {\n            transform: [{ translateX: scrollNav }],\n          },\n        ]}\n      />\n    ),\n    [activeCategoryContainerColor, scrollNav]\n  )\n\n  const getStylesBasedOnPosition = () => {\n    const style: ViewStyle[] = [styles.navigation, categoryContainerStyles]\n    switch (categoryPosition) {\n      case 'floating':\n        style.push(styles.navigationFloating)\n        break\n      case 'top':\n        style.push(styles.navigationTop)\n        break\n      case 'bottom':\n        style.push(styles.navigationBottom)\n        break\n      default:\n        exhaustiveTypeCheck(categoryPosition)\n        break\n    }\n\n    if (\n      categoryContainerColor !== defaultKeyboardContext.categoryContainerColor ||\n      categoryPosition === 'floating'\n    )\n      style.push({\n        backgroundColor: categoryContainerColor,\n      })\n    return style\n  }\n\n  const renderData = React.useMemo(() => {\n    return renderList.map((category) => ({\n      category: category.title,\n      icon:\n        CATEGORIES_NAVIGATION.find((cat) => cat.category === category.title)?.icon ||\n        'QuestionMark',\n    })) as CategoryNavigationItem[]\n  }, [renderList])\n\n  return (\n    <View style={[categoryPosition === 'floating' && styles.floating]}>\n      <View style={getStylesBasedOnPosition()}>\n        <FlatList\n          data={renderData}\n          keyExtractor={(item) => item.category}\n          renderItem={renderItem}\n          ItemSeparatorComponent={() => <View style={styles.separator} />}\n          showsHorizontalScrollIndicator={false}\n          horizontal={true}\n          onScrollToIndexFailed={onCategoryChangeFailed}\n          ListHeaderComponent={activeIndicator}\n          ListHeaderComponentStyle={styles.activeIndicatorContainer}\n          extraData={activeCategoryIndex}\n        />\n      </View>\n    </View>\n  )\n}\n\nconst styles = StyleSheet.create({\n  floating: {\n    position: 'absolute',\n    bottom: 20,\n    left: 20,\n    right: 20,\n    alignItems: 'center',\n  },\n  navigation: {\n    padding: 3,\n    alignItems: 'center',\n    borderColor: '#00000011',\n  },\n  navigationFloating: {\n    borderRadius: 8,\n  },\n  navigationBottom: {\n    paddingVertical: 6,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    borderTopWidth: 1,\n  },\n  navigationTop: {\n    paddingTop: 12,\n    paddingBottom: 6,\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n    borderBottomWidth: 1,\n  },\n  separator: {\n    width: 1,\n    height: 28,\n    backgroundColor: '#00000011',\n    marginHorizontal: 4,\n  },\n  activeIndicator: {\n    position: 'absolute',\n    width: 28,\n    height: 28,\n    borderRadius: 6,\n  },\n  activeIndicatorContainer: {\n    position: 'absolute',\n    width: 28,\n    height: 28,\n  },\n})\n"]}